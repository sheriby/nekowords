# Neko🐱Words

[English Documentation](README.md)

## 简介
Neko🐱Words 是一个基于网页的日语词汇学习应用，通过自由间隔重复调度器（FSRS）算法帮助用户有效地记忆日语单词。FSRS 是一种前沿的、经过科学优化的间隔重复算法，与传统的 SRS 系统相比，显著提高了学习效率。该应用提供直观的界面和智能的复习计划，优化您的日语学习体验。

## 功能特点

### 多种学习模式
- **日语到中文**：练习识别日语单词并回忆其含义
- **中文到日语**：挑战自己写出日语单词
- **假名到含义**：专注于阅读和理解日语假名
- **记忆卡片模式**：传统卡片式复习
- **混合模式**：组合不同模式进行综合学习

### 自由间隔重复调度器（FSRS）
- **先进算法**：实现由 Jarrett Ye (L.M. Ye) 开发的前沿 FSRS 算法
- **科学记忆模型**：基于精确预测遗忘曲线的复杂记忆模型
- **机器学习优化**：参数源自对真实学习数据的广泛分析
- **四个难度评级**：
  - 重来：完全忘记的项目（重置稳定性）
  - 困难：艰难回忆的项目（稳定性小幅增加）
  - 良好：成功但需要一定努力的回忆（稳定性中等增加）
  - 简单：毫不费力的回忆（稳定性大幅增加）
- **自适应调度**：根据以下因素动态调整间隔：
  - 项目难度
  - 记忆稳定性
  - 可提取性
  - 复习历史
- **最佳保留率**：在最小化复习频率的同时，目标保留率为90%
- **进度追踪**：全面的学习进度和记忆强度统计

### 导入导出功能
- **灵活的文件导入**：
  - 支持多种分隔符的CSV文件（逗号、制表符、分号）
  - 批量导入多个文件
  - 自动检测文件编码
- **智能词汇处理**：
  - 自动假名检测
  - 重复单词检查
  - 无效格式警告
- **导出功能**：
  - 导出错题进行针对性复习
  - 导出学习进度
  - 支持多种导出格式

### 用户界面
- **简洁设计**：专注学习的极简界面
- **进度指示器**：
  - 实时正确/错误统计
  - 复习进度可视化
  - SRS等级指示器
- **键盘快捷键**：高效的输入和导航
- **移动端响应**：支持各种设备学习

## 安装说明

### 环境要求
- Python 3.7 或更高版本
- pip 包管理器
- 现代浏览器

### 安装步骤
1. **克隆仓库**
   ```bash
   git clone https://github.com/sheriby/nekowords.git
   cd nekowords
   ```

2. **创建虚拟环境（推荐）**
   ```bash
   python -m venv venv
   # Windows
   .\venv\Scripts\activate
   # Linux/Mac
   source venv/bin/activate
   ```

3. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

4. **初始化数据库**
   ```bash
   python init_db.py
   ```

## 使用说明

### 启动应用
1. **使用启动脚本**
   ```bash
   # Windows
   start.bat

   # Linux/Mac
   ./start.sh
   ```

2. **手动启动**
   ```bash
   python app.py
   ```

3. 在浏览器中访问 `http://localhost:5000`

### 导入词汇
1. 准备符合以下格式的CSV文件：
   ```csv
   日语,中文,假名（可选）
   日本語,中文,にほんご
   ```

2. 点击主界面的"导入"按钮
3. 选择您的CSV文件
4. 确认导入设置

### 学习流程
1. **选择学习模式**
   - 从可用的学习模式中选择
   - 根据需要配置复习设置

2. **学习环节**
   - 在输入框中输入答案
   - 使用键盘快捷键提高效率：
     - Enter：提交答案
     - Tab：跳过当前单词
     - Esc：返回菜单

3. **复习**
   - 评价记忆难度
   - 复习错误答案
   - 根据需要导出进度

## 技术细节

### 技术栈
- **后端**：
  - Python 3.7+
  - Flask 2.0.1
  - SQLite3（使用 WAL 模式提高并发性）
- **前端**：
  - HTML5
  - CSS3
  - 原生 JavaScript（ES6+）
  - 模块化架构
- **数据库架构**：
  - 单词表：存储词汇项目
  - FSRS 记录表：跟踪每个项目的记忆状态
  - 用户进度表：维护学习统计数据

### FSRS 实现细节
- **记忆模型参数**：
  - 稳定性：衡量项目在记忆中的保持程度
  - 难度：表示项目的固有复杂性（1-5 分级）
  - 可提取性：在给定时间成功回忆的概率
- **状态转换**：
  - 新项目 → 学习中/复习中：初始学习阶段
  - 复习中 → 复习中：成功的复习增强稳定性
  - 复习中 → 重新学习中：失败的复习触发重新学习
  - 重新学习中 → 复习中：重新学习的项目返回复习周期
- **调度算法**：
  - 使用 17 个优化参数进行精确的间隔计算
  - 根据项目难度和响应质量调整间隔
  - 对忘记的项目实施指数退避
  - 应用幂律遗忘曲线模型
- **性能优化**：
  - 数据库操作的批处理
  - 连接池减少数据库锁定
  - 使用目标查询实现高效内存使用
  - 异步数据更新

### 文件结构
```
nekowords/
├── app.py                # 主应用文件
├── init_db.py            # 数据库初始化
├── requirements.txt      # Python依赖
├── db/                   # 数据库相关模块
│   ├── __init__.py       # 数据库连接管理
│   └── schema.py         # 数据库架构定义
├── models/               # 数据模型
│   ├── deck.py           # 词单管理
│   ├── fsrs.py           # FSRS算法实现
│   └── word.py           # 单词管理
├── routes/               # API路由
│   ├── deck_routes.py    # 词单相关端点
│   ├── fsrs_routes.py    # FSRS相关端点
│   └── word_routes.py    # 单词相关端点
├── static/               # 静态文件
│   ├── css/              # 样式表
│   ├── js/               # JavaScript文件
│   │   ├── api.js        # API客户端
│   │   ├── app.js        # 应用初始化
│   │   ├── config.js     # 配置
│   │   ├── flashcard.js  # 记忆卡片模式
│   │   ├── fsrs.js       # FSRS客户端实现
│   │   ├── main.js       # 主入口点
│   │   └── ui.js         # UI组件
│   └── images/           # 图片资源
├── templates/            # HTML模板
│   └── index.html        # 主应用模板
├── utils/                # 工具函数
│   └── file_utils.py     # 文件处理工具
└── temp/                 # 临时文件存储
```

## 最佳实践

### 学习效率
- 每个词单建议控制在500个单词以内，以获得最佳学习效果
- 定期短时间复习比长时间学习更有效
- 信任FSRS算法的调度 - 避免集中学习
- 按照计划时间复习项目，不要提前或拖延太久

### FSRS使用技巧
- 诚实评价难度等级，以获得最佳调度效果
- 仅在完全忘记项目时使用"重来"
- 在需要付出显著努力才能回忆时使用"困难"
- 对于需要一定努力但能成功回忆的项目使用"良好"（最常见）
- 仅在回忆毫不费力且自动化时使用"简单"

### 技术提示
- 定期导出并备份您的学习进度
- 所有导入文件请使用UTF-8编码
- 对于大量导入（1000+单词），预计会有一些初始处理时间
- 数据库操作使用批处理以防止锁定

## 参与贡献
欢迎提交Pull Request来改进项目！

## 许可证
本项目采用MIT许可证 - 详见 [LICENSE](LICENSE) 文件